<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Voice PC Agent</title>
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;700&display=swap"
    />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <main class="app">
      <header class="topbar">
        <div>
          <h1>Voice PC Agent</h1>
          <p>Modo voz activo por defecto</p>
        </div>
        <div class="top-actions">
          <button id="updateCheckBtn" type="button" class="hidden">Buscar actualización</button>
          <button id="updateDownloadBtn" type="button" class="hidden">Descargar actualización</button>
          <button id="updateInstallBtn" type="button" class="hidden">Reiniciar y actualizar</button>
        </div>
        <div class="header-controls">
          <button id="settingsBtn" type="button" class="settings-gear" aria-label="Abrir configuración">⚙</button>
          <label class="toggle">
            <input id="textModeToggle" type="checkbox" />
            <span>Modo texto</span>
          </label>
        </div>
      </header>
      <p id="updateStatus" class="update-status hidden"></p>
      <section id="providerPanel" class="provider-panel hidden" aria-label="Configuración de proveedor">
        <h2>Proveedor LLM</h2>
        <p id="providerStatusLine" class="provider-status-line">PROVEEDOR: OLLAMA</p>
        <div class="provider-toggle-row">
          <button id="providerOllamaBtn" type="button">OLLAMA</button>
          <button id="providerOpenaiBtn" type="button">OPENAI</button>
          <button id="providerAnthropicBtn" type="button">ANTHROPIC</button>
        </div>

        <div id="ollamaSettings" class="provider-block">
          <label for="ollamaModelSelect">MODELO</label>
          <select id="ollamaModelSelect"></select>
        </div>

        <div id="openaiSettings" class="provider-block hidden">
          <label for="openaiKeyInput">API KEY</label>
          <input id="openaiKeyInput" type="password" autocomplete="off" placeholder="sk-..." />
          <label for="openaiModelSelect">MODELO</label>
          <select id="openaiModelSelect">
            <option value="gpt-4o-mini">gpt-4o-mini</option>
            <option value="gpt-4o">gpt-4o</option>
            <option value="gpt-4-turbo">gpt-4-turbo</option>
          </select>
        </div>

        <div id="anthropicSettings" class="provider-block hidden">
          <label for="anthropicKeyInput">API KEY</label>
          <input id="anthropicKeyInput" type="password" autocomplete="off" placeholder="sk-ant-..." />
          <label for="anthropicModelSelect">MODELO</label>
          <select id="anthropicModelSelect">
            <option value="claude-haiku-4-5-20251001">claude-haiku-4-5-20251001</option>
            <option value="claude-sonnet-4-6">claude-sonnet-4-6</option>
            <option value="claude-opus-4-6">claude-opus-4-6</option>
          </select>
        </div>

        <div class="provider-actions">
          <button id="providerSaveBtn" type="button" class="primary">GUARDAR</button>
          <button id="providerCloseBtn" type="button">CERRAR</button>
        </div>
        <p id="providerStatusMsg" class="provider-status-msg"></p>
      </section>

      <section id="setupPanel" class="setup-panel hidden">
        <h2>Asistente de Inicio</h2>
        <p id="setupSummary">Comprobando Ollama y modelo local...</p>
        <ul id="setupChecklist" class="setup-checklist"></ul>
        <div class="setup-actions">
          <button id="setupInstallBtn" type="button" class="primary hidden">Instalar Ollama</button>
          <button id="setupStartBtn" type="button" class="hidden">Iniciar Ollama</button>
          <button id="setupPullBtn" type="button" class="hidden">Descargar Modelo</button>
          <button id="setupRefreshBtn" type="button">Recomprobar</button>
        </div>
        <pre id="setupLog" class="setup-log hidden"></pre>
      </section>

      <section class="voice-stage">
        <div id="orb" class="orb idle" aria-hidden="true">
          <div class="ring ring-1"></div>
          <div class="ring ring-2"></div>
          <div class="core"></div>
        </div>
        <div id="visualizer" aria-hidden="true"></div>

        <div class="status-block">
          <h2 id="statusMain">Listo para hablar</h2>
          <p id="statusSub">Pulsa "Activar voz" y empieza a pedir tareas.</p>
        </div>

        <div class="controls">
          <button id="startVoiceBtn" class="primary">Activar voz</button>
          <label class="toggle">
            <input id="ttsToggle" type="checkbox" checked />
            <span>Voz del agente</span>
          </label>
          <label class="toggle">
            <input id="autoListenToggle" type="checkbox" checked />
            <span>Manos libres</span>
          </label>
        </div>
      </section>

      <section id="textConsole" class="text-console hidden">
        <section id="chat" class="chat"></section>
        <section id="pending" class="pending hidden"></section>
        <form id="chatForm" class="input-row">
          <input id="messageInput" type="text" placeholder="Escribe un comando o pregunta..." autocomplete="off" />
          <button type="submit">Enviar</button>
        </form>
      </section>
    </main>

    <script type="module" src="app.js"></script>
  </body>
</html>
